# =============================================================
# Reservas Profesionales - Configuración Quarkus
# =============================================================

quarkus.application.name=quarkus-reservas
quarkus.application.version=1.0.0

# -------------------------------------------------------------
# DataSource - PostgreSQL (Dev Services en modo dev/test)
# En producción, sobreescribir con variables de entorno.
# -------------------------------------------------------------
quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.username=${DB_USERNAME:postgres}
%prod.quarkus.datasource.password=${DB_PASSWORD:postgres}

# Reactive URL (Hibernate Reactive / Vert.x PG Client)
%prod.quarkus.datasource.reactive.url=postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:reservas_db}

# JDBC URL (Flyway usa JDBC bloqueante)
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:reservas_db}

# Dev Services: auto-inicia contenedor PostgreSQL en modo dev y test
quarkus.datasource.devservices.image-name=postgres:16-alpine
quarkus.datasource.devservices.db-name=reservas_db

# -------------------------------------------------------------
# Hibernate ORM Reactive
# -------------------------------------------------------------
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# -------------------------------------------------------------
# Flyway - Migraciones de base de datos
# -------------------------------------------------------------
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
quarkus.flyway.baseline-on-migrate=true

# -------------------------------------------------------------
# SmallRye OpenAPI / Swagger UI
# -------------------------------------------------------------
quarkus.smallrye-openapi.info-title=API de Reservas Profesionales
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=\
  Sistema REST para control de reservas y disponibilidad de profesionales \
  en un centro de servicios (psicología, mentorías, asesorías, tutorías).
quarkus.smallrye-openapi.info-contact-name=MitoCode Network
quarkus.smallrye-openapi.info-contact-email=geovanny@geovannycode.com
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# -------------------------------------------------------------
# HTTP
# -------------------------------------------------------------
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,Accept

# -------------------------------------------------------------
# Jackson - Serialización JSON
# -------------------------------------------------------------
quarkus.jackson.serialization-inclusion=non-null
quarkus.jackson.write-dates-as-timestamps=false

# -------------------------------------------------------------
# Logging
# -------------------------------------------------------------
quarkus.log.level=INFO
quarkus.log.category."com.geovannycode.reservas".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# -------------------------------------------------------------
# SmallRye Fault Tolerance (configuración global)
# -------------------------------------------------------------
# Deshabilitar en tests si se requiere (sobreescribir en test profile)
# smallrye.faulttolerance.global.enabled=true

# -------------------------------------------------------------
# Perfil: Producción (%prod)
# Sobreescribir variables sensibles via env vars en despliegue
# -------------------------------------------------------------
%prod.quarkus.datasource.devservices.enabled=false
%prod.quarkus.log.level=WARN
%prod.quarkus.log.category."com.geovannycode.reservas".level=INFO
%prod.quarkus.swagger-ui.always-include=false

# -------------------------------------------------------------
# Perfil: Test (%test)
# -------------------------------------------------------------
%test.quarkus.flyway.migrate-at-start=true
%test.quarkus.log.level=WARN
%test.quarkus.datasource.devservices.enabled=true
